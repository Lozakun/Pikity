<%- include('../includes/header') %>
<%- include('../includes/navigation') %>

<% console.log(ligaId) %>
<% const result = ligas.find(liga => liga.id == ligaId); %>
<% console.log(result.equipos.length) %>

<div class="container">
    <div class="row">
        <div class="col-md-12">
                <% if(result.equipos.length === 0) { %>
                    <h3>No existen equipos en esta liga...</h3>
                    <a href="/ligas/<%= result.id %>/equipos/agrega-equipo" class="btn btn-success">Agrega Equipos.</a>
                <% } else { %>
                    <% if (result.equipos.length < result.numEquipos){ %>
                        <a href="/ligas/<%= result.id %>/equipos/agrega-equipo" class="btn btn-warning">Agrega Equipos Restantes</a>
                    <% } %>
                    <br>
                    <h2>Estadisticas de la <%= result.nombreLiga %></h2>
                    <table class="table table-hover">
                        <thead>
                            <tr>
                                <th scope="col">Equipo</th>
                                <th scope="col">P. Ganados</th>
                                <th scope="col">P. Empatados</th>
                                <th scope="col">P. Perdidos</th>
                                <th scope="col">Goles a Favor</th>
                                <th scope="col">Goles en Contra</th>
                                <th scope="col">Diferencia</th>
                                <th scope="col">Puntos</th>
                            </tr>
                        </thead>
                        <tbody>
                                <% result.equipos.forEach(equipo=>{ %>
                                    <tr>
                                        <td><%= equipo.nombreEquipo %></td>
                                        <td><%= equipo.partidosGanados %></td>
                                        <td><%= equipo.partidosEmpatados %></td>
                                        <td><%= equipo.partidosPerdidos %></td>
                                        <td><%= equipo.golesFavor %></td>
                                        <td><%= equipo.golesContra %></td>
                                        <td><%= equipo.golesDiferencia %></td>
                                        <td><%= equipo.puntos %></td>
                                    </tr>
                                <% }); %>
                        </tbody>
                    </table>
                <% } %>
                <% if(result.equipos.length > 0){ %>
                    <% if( result.jornadas.length > 0 ) { %>
                        <a class="btn btn-success" href="/partidos/<%= result.id %>/ver-calendario">Calendario</a>
                    <% } else { %>
                        <a class="btn btn-success" href="/partidos/<%= result.id %>">Calendario</a>
                    <% } %>
                    <a class="btn btn-warning" href="/partidos/<%= result.id %>/editar">Editar</a>
                <% } %>
                
        </div>
    </div>
</div>

<%- include('../includes/footer') %>